#!/usr/bin/env node

var gist = require('../')
  , Helpers = gist.Helpers
  , PodfileUpdater = gist.PodfileUpdater

var program = require('commander')
program.parse(process.argv)


var podfileDir   = (program.args.length > 0) ? program.args[0]       : '.'
var podsToUpdate = (program.args.length > 1) ? program.args.slice(1) : []

PodfileUpdater.podfileBySubstitutingGistpodRefs(podfileDir, podsToUpdate, function (err, podfile) {
    if (err) { Helpers.CLI.dieError(err) }
    else {
        PodfileUpdater.writePodfile(podfileDir, podfile, function (err, output) {
            if (err) { Helpers.CLI.dieError(err) }
            Helpers.CLI.print(output)
        })
    }
})


