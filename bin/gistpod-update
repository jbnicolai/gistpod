#!/usr/bin/env node

var CLI = require('../lib/cli')
  , PodfileUpdater = require('../lib/podfile-updater')

var program = require('commander')
program.parse(process.argv)


var podfileDir   = (program.args.length > 0) ? program.args[0]       : '.'
var podsToUpdate = (program.args.length > 1) ? program.args.slice(1) : []

PodfileUpdater.podfileBySubstitutingGistpodRefs(podfileDir, podsToUpdate, function (err, podfile) {
    if (err) { CLI.dieError(err) }
    else {
        PodfileUpdater.writePodfile(podfileDir, podfile, function (err, output) {
            if (err) { CLI.dieError(err) }
            CLI.print(output)
        })
    }
})


