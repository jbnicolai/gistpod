#!/usr/bin/env node

var Cache = require('../lib/cache')
  , Config = require('../lib/config')
  , CLI = require('../lib/cli')


// Config.touchConfig()
// Cache.touchCache()

Config.ensureConfig(function (err) {
    if (err) { CLI.dieError(err) }

    Cache.ensureCache(function (err) {
        if (err) { CLI.dieError(err) }

        var program = require('commander')
        program
            .version('0.1.0')
            .command('username <username>',         'set the GitHub username from which to retrieve gists (config file: ~/.gistpod)')
            .command('url <pod>',                   'look up the latest gist URL for the specified CocoaPod')
            .command('pull',                        'pull the latest data from the GitHub API into your local cache (~/.gistpod-cache)')
            .command('update <Podfile> [pods...]',  'updates the gist refs for the given Pods (or all Pods, if none are specified) in the specified Podfile to the latest revisions')
            .command('list',                        'list known podspec gists')
            .parse(process.argv)

        if (program.args.length <= 0) {
            program.help()
        }


    })
})

